import streamlit as st
import google.generativeai as genai

# ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ ุจุชุตููู ุจุณูุท ููุทูุงุจ
st.set_page_config(page_title="AI Exam Maker", page_icon="๐")

st.title("๐ ุตุงูุน ุงูุงุฎุชุจุงุฑุงุช ุงูุฐูู")
st.subheader("ุญููู ููุฎุตุงุชู ุฅูู ุฃุณุฆูุฉ ุญููููุฉ ูู ุซูุงูู")

# ุดุฑูุท ุฌุงูุจู ูุฅุฏุฎุงู ุงูู API Key
with st.sidebar:
    st.title("ุงูุฅุนุฏุงุฏุงุช")
    api_key = st.text_input("ุฃุฏุฎู Gemini API Key:", type="password")
    st.info("ุงุญุตู ุนูู ููุชุงุญู ูุฌุงูุงู ูู Google AI Studio")

if api_key:
    genai.configure(api_key=api_key)
    model = genai.GenerativeModel('gemini-1.5-flash')

    # ููุทูุฉ ุฑูุน ุงูููู
    uploaded_file = st.file_uploader("ุงุฑูุน ููู ุงูุฏุฑุณ (ุตูุบุฉ .txt ุญุงููุงู)", type=['txt'])

    if uploaded_file:
        # ูุฑุงุกุฉ ุงููุต ูู ุงูููู
        text_content = uploaded_file.read().decode("utf-8")
        st.success("ุชู ูุฑุงุกุฉ ุงูููู ุจูุฌุงุญ!")

        if st.button("ุชูููุฏ ุงุฎุชุจุงุฑ ูุงูุนู"):
            with st.spinner('ุงูุชุธุฑ ููููุงู.. ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููุฑุฃ ููุญูู...'):
                # ุงูุจุฑููุจุช (ุงูุฃูุฑ) ุงูุฐู ููุฌู ุงูุฐูุงุก ุงูุงุตุทูุงุนู
                prompt = f"""
                ุฃูุช ุฎุจูุฑ ุชุนูููู. ุจูุงุกู ุนูู ุงููุต ุงูุชุงููุ ูู ุจุชูููุฏ 3 ุฃุณุฆูุฉ ุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ.
                ุดุฑูุท ุงูุงุฎุชุจุงุฑ:
                1. ุงูุฃุณุฆูุฉ ุชููุณ ุงูููู ูููุณ ุงูุญูุธ ููุท.
                2. ุงุฐูุฑ ุงูุฎูุงุฑุงุช (ุฃุ ุจุ ุฌุ ุฏ).
                3. ุถุน ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูุน ุดุฑุญ ุจุณูุท ูุณุจุจ ุตุญุชูุง ูู ุงูููุงูุฉ.
                
                ุงููุต:
                {text_content}
                """
                
                response = model.generate_content(prompt)
                
                # ุนุฑุถ ุงููุชูุฌุฉ
                st.markdown("---")
                st.markdown("### ๐ ุงูุงุฎุชุจุงุฑ ุงูููุชุฑุญ:")
                st.write(response.text)
else:
    st.warning("ุงูุฑุฌุงุก ุฅุฏุฎุงู Gemini API Key ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ููุจุฏุก.")
